<ion-header>
    <ion-toolbar>

        <ion-title>Payment</ion-title>
        
        <ion-buttons slot="start">
          <ion-button horizontal="end" fill="clear" size="small" (click)="back()">
            <ion-icon slot="end" name="arrow-back-outline"></ion-icon>
          </ion-button>
        </ion-buttons>

    </ion-toolbar>
</ion-header>

<ion-content>

  <div class="form">

    <form [formGroup]="paymentForm" novalidate *ngIf="isFindingRecipient">

        <ion-list margin-top margin-bottom>

            <ion-list-header>
              Recipient code
              <ion-label item-end style="text-align: right;">
                <ion-button size="small" fill="clear" slot="end" (click)="info()">
                  <ion-icon name="information-circle-outline"></ion-icon>
                </ion-button>
              </ion-label>
            </ion-list-header>
           
            <ion-item>

              <input formControlName="recipient_code" #a (keyup.enter)="moveFocus(b)" placeholder="Code">
            </ion-item>
            
            <ion-list-header>
              Details on payment (Optional)
            </ion-list-header>

            <ion-item>
              <ion-textarea #b (keyup.enter)="find_recipient()" placeholder="Details (Optional)" rows="3" ngDefaultControl formControlName="details" class="form-control"></ion-textarea>
            </ion-item>
              
        </ion-list>
        
        <br>
          
        <ion-list lines="none" class="ion-text-center">
          <ion-button (click)="find_recipient()" shape="round" color="light">
            Find reciepient code
          </ion-button>
        </ion-list>

        <br>

    </form>
    
    <!-- Spinner : checking recipient_code before showing payment options-->
    <ion-spinner name="lines" *ngIf="isLoading" style="text-align: center; width: 100%; margin: 90px 0px;"></ion-spinner>

    <ion-list lines="none" *ngIf="!hideElement">

        <ion-item class="ion-text-center">
          <div style="text-align: center;width: 100%;">
            <ion-button (click)="clear()" shape="round" color="light">
              Cancel
            </ion-button>
          </div>
        </ion-item>

        <ion-list lines="none" *ngIf="authService.isLoggedIn">
    
          <ion-grid>
            <ion-row>
    
              <ion-col size="1">
              </ion-col>
    
              <ion-col size="10">
                <ion-card class="ion-text-start">
                  
                  <ion-card-header>
                  </ion-card-header>

                  <ion-card-content class="ion-text-center">
                    <div style="text-align: center;">
                      <img *ngIf="!user_data.avatar" text-center class="circle" src="../../../assets/user.png" />
                      <img *ngIf="user_data.avatar" text-center class="circle" [src]="user_data.avatar" />
                    </div>
                  </ion-card-content>

                  <ion-card-header class="ion-text-center">
                    <ion-card-title>{{ user_data.username }}</ion-card-title>
                    <ion-label>{{ user_data.share_code }}</ion-label>
                    <br/>
                    <ion-card-title>R{{ amount }}</ion-card-title>
                  </ion-card-header>

                </ion-card>
              </ion-col>
    
              <ion-col size="1">
              </ion-col>
    
            </ion-row>
          </ion-grid>
    
        </ion-list>

        <br/>

        <ion-list-header>
          Select form of payment below
        </ion-list-header>
      
        <ion-item-sliding *ngFor="let s of payment_options">
          
          <ion-item (click)="passwordAlertPrompt(s.id)" style="cursor: pointer;">
            <ion-avatar slot="end">
              <img [src]="s.logo.full_size" />
            </ion-avatar>
            <ion-label>{{s.name}}</ion-label>
          </ion-item>
      
          <ion-item-options>
            <ion-button color="light">
              <ion-icon name="information"></ion-icon>
            </ion-button>
          </ion-item-options>

        </ion-item-sliding>
      
    </ion-list>
    
  </div>

</ion-content>
